{% extends "layout.html" %}

{% block title %}Contact Me{% endblock %}

{% block main %}
<section id="contact">
    <div class="container py-5">
        <h2 class="text-center mb-4">Contact Me</h2>
        <form id="contact-form">
            <!-- To simplify the tutorial, the value is static. -->
            <input type="hidden" name="contact_number" value="697483">
            <div class="row">
                <div class="col-md-6">
                    <label for="user_name">Your Name</label>
                    <input type="text" class="form-control" placeholder="Your Name" id="user_name" name="user_name" required>
                </div>
                <div class="col-md-6">
                    <label for="user_email">Your Email</label>
                    <input type="email" class="form-control" placeholder="Your Email" id="user_email" name="user_email" required>
                </div>
                <div class="col-md-12">
                    <label for="message">Your Message</label>
                    <textarea class="form-control" id="message" placeholder="Your Message" name="user_message" rows="10" required></textarea>
                </div>
                <div class="col-md-12 text-center">
                    <input type="submit" class="btn btn-primary mt-4 btn-lg" value="Send Message" id="submit-btn">
                </div>
            </div>
        </form>
        <div id="form-status" class="text-center mt-4"></div>
    </div>
</section>

<section id="socials">
    <div class="container py-5">
        <h2 class="text-center mb-4">Other Ways To Connect</h2>
        <div class="row">
            <div class="col-md-6">
                <h3>Email</h3>
                <p>
                    You can reach me directly via email:
                    <a href="mailto:gavigardin@gmail.com" class="contact-link">gavigardin@gmail.com</a>
                </p>
            </div>
            <div class="col-md-6">
                <h3>Social Media</h3>
                <p>Feel free to connect with me on social media:</p>
                <ul class="list-unstyled">
                    <li>
                        <a href="https://www.instagram.com/itzgoobers/" target="_blank" class="contact-link">
                            <i class="fab fa-instagram"></i> Instagram
                        </a>
                    </li>
                    <li>
                        <a href="https://x.com/ItzGoobers" target="_blank" class="contact-link">
                            <i class="fab fa-twitter"></i> X (Twitter)
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/GoobersG" target="_blank" class="contact-link">
                            <i class="fab fa-github"></i> GitHub
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/gavi-gardin-06765a330/" target="_blank" class="contact-link">
                            <i class="fab fa-linkedin"></i> LinkedIn
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Load EmailJS SDK -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script type="text/javascript">
    // Initialize EmailJS with your public key
    (function() {
        emailjs.init("1JN8V7dSwajBFMI7f");  // Replace with your public key from EmailJS
    })();

    // Handle form submission
    window.onload = function() {
        const form = document.getElementById('contact-form');
        const submitButton = document.getElementById('submit-btn');
        const formStatus = document.getElementById('form-status');

        form.addEventListener('submit', function(event) {
            event.preventDefault();  // Prevent the default form submission

            // Disable the submit button and show "Please try again later" message
            submitButton.disabled = true;
            formStatus.innerHTML = "<p class='text-warning'>Please wait while we send your message. Do not submit again.</p>";

            // Send the form data to EmailJS
            emailjs.sendForm('service_habymgh', 'template_lp4s6lg', this)
                .then((response) => {
                    console.log('SUCCESS!', response);
                    formStatus.innerHTML = "<p class='text-success'>Message sent successfully!</p>";
                    form.reset();  // Optionally reset the form
                }, (error) => {
                    console.log('FAILED...', error);
                    formStatus.innerHTML = "<p class='text-danger'>Oops! Something went wrong. Please try again later.</p>";
                })
                .finally(() => {
                    // Re-enable the submit button after response is received (either success or error)
                    formStatus.innerHTML = "<p class='text-success'>Message sent successfully! I will get back to you ASAP.</p>";
                });
        });
    };
</script>
{% endblock %}
